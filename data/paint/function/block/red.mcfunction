scoreboard players set lasers count 0
scoreboard players set lasersp1 count 0
scoreboard players set lasersp2 count 0
scoreboard players set lasersp3 count 0
scoreboard players set lasersp4 count 0
scoreboard players set cubelasers count 0
execute as @e[tag=cubelaser,tag=laser,type=shulker,tag=current] run scoreboard players add cubelasers count 1
execute as @e[tag=!cubelaser,tag=laser,type=shulker,tag=current,tag=p1laser] run scoreboard players add lasersp1 count 1
execute as @e[tag=!cubelaser,tag=laser,type=shulker,tag=current,tag=p2laser] run scoreboard players add lasersp2 count 1
execute as @e[tag=!cubelaser,tag=laser,type=shulker,tag=current,tag=p3laser] run scoreboard players add lasersp3 count 1
execute as @e[tag=!cubelaser,tag=laser,type=shulker,tag=current,tag=p4laser] run scoreboard players add lasersp4 count 1
scoreboard players set maxlasers count 16
#summon laser shulkers (in a line)
#players 1 and 2
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=xminus,tag=!setup,tag=!new,tag=p1laser,tag=current] at @s if score lasersp1 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~-1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~-0.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","xminus","new","current","p1laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=xminus,tag=!setup,tag=!new,tag=p2laser,tag=current] at @s if score lasersp2 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~-1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~-0.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","xminus","new","current","p2laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}

execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=xplus,tag=!setup,tag=!new,tag=p1laser,tag=current] at @s if score lasersp1 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~1.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","xplus","new","current","p1laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=xplus,tag=!setup,tag=!new,tag=p2laser,tag=current] at @s if score lasersp2 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~1.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","xplus","new","current","p2laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}

execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=zminus,tag=!setup,tag=!new,tag=p1laser,tag=current] at @s if score lasersp1 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~-1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~-0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","zminus","new","current","p1laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=zminus,tag=!setup,tag=!new,tag=p2laser,tag=current] at @s if score lasersp2 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~-1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~-0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","zminus","new","current","p2laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}

execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=zplus,tag=!setup,tag=!new,tag=p1laser,tag=current] at @s if score lasersp1 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~1.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","zplus","new","current","p1laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=zplus,tag=!setup,tag=!new,tag=p2laser,tag=current] at @s if score lasersp2 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~1.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","zplus","new","current","p2laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}

execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=yminus,tag=!setup,tag=!new,tag=p1laser,tag=current] at @s if score lasersp1 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~-1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~-1 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","yminus","new","current","p1laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=yminus,tag=!setup,tag=!new,tag=p2laser,tag=current] at @s if score lasersp2 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~-1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~-1 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","yminus","new","current","p2laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}

execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=yplus,tag=!setup,tag=!new,tag=p1laser,tag=current] at @s if score lasersp1 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~1 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","yplus","new","current","p1laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=yplus,tag=!setup,tag=!new,tag=p2laser,tag=current] at @s if score lasersp2 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~1 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","yplus","new","current","p2laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}

#players 3 and 4
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=xminus,tag=!setup,tag=!new,tag=p3laser,tag=current] at @s if score lasersp3 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~-1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~-0.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","xminus","new","current","p3laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=xminus,tag=!setup,tag=!new,tag=p4laser,tag=current] at @s if score lasersp4 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~-1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~-0.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","xminus","new","current","p4laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}

execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=xplus,tag=!setup,tag=!new,tag=p3laser,tag=current] at @s if score lasersp3 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~1.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","xplus","new","current","p3laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=xplus,tag=!setup,tag=!new,tag=p4laser,tag=current] at @s if score lasersp4 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~1.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","xplus","new","current","p4laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}

execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=zminus,tag=!setup,tag=!new,tag=p3laser,tag=current] at @s if score lasersp3 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~-1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~-0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","zminus","new","current","p3laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=zminus,tag=!setup,tag=!new,tag=p4laser,tag=current] at @s if score lasersp4 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~-1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~-0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","zminus","new","current","p4laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}

execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=zplus,tag=!setup,tag=!new,tag=p3laser,tag=current] at @s if score lasersp3 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~1.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","zplus","new","current","p3laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=zplus,tag=!setup,tag=!new,tag=p4laser,tag=current] at @s if score lasersp4 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~1.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","zplus","new","current","p4laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}

execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=yminus,tag=!setup,tag=!new,tag=p3laser,tag=current] at @s if score lasersp3 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~-1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~-1 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","yminus","new","current","p3laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=yminus,tag=!setup,tag=!new,tag=p4laser,tag=current] at @s if score lasersp4 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~-1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~-1 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","yminus","new","current","p4laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}

execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=yplus,tag=!setup,tag=!new,tag=p3laser,tag=current] at @s if score lasersp3 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~1 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","yplus","new","current","p3laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}
execute as @e[tag=!cubelaser,type=shulker,tag=laser,tag=yplus,tag=!setup,tag=!new,tag=p4laser,tag=current] at @s if score lasersp4 count < maxlasers count if block ~ ~ ~ #paint:laserwhitelist if block ~ ~1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~1 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["laser","yplus","new","current","p4laser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current"],ArmorItems:[{},{},{},{id:"minecraft:dark_oak_fence_gate"}]}]}


#summon blue laser (from caster)
execute as @e[tag=type_blue,tag=cubelaser,type=shulker,tag=laser,tag=xminus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~-1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~-0.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_blue","laser","xminus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:birch_fence_gate"}]}]}
execute as @e[tag=type_blue,tag=cubelaser,type=shulker,tag=laser,tag=xplus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~1.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_blue","laser","xplus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:birch_fence_gate"}]}]}
execute as @e[tag=type_blue,tag=cubelaser,type=shulker,tag=laser,tag=zminus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~-1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~-0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_blue","laser","zminus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:birch_fence_gate"}]}]}
execute as @e[tag=type_blue,tag=cubelaser,type=shulker,tag=laser,tag=zplus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~1.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_blue","laser","zplus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:birch_fence_gate"}]}]}
execute as @e[tag=type_blue,tag=cubelaser,type=shulker,tag=laser,tag=yminus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~-1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~-0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_blue","laser","yminus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:birch_fence_gate"}]}]}
execute as @e[tag=type_blue,tag=cubelaser,type=shulker,tag=laser,tag=yplus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~1 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_blue","laser","yplus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:birch_fence_gate"}]}]}

#summon green laser (from caster)
execute as @e[tag=type_green,tag=cubelaser,type=shulker,tag=laser,tag=xminus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~-1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~-0.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_green","laser","xminus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:jungle_fence_gate"}]}]}
execute as @e[tag=type_green,tag=cubelaser,type=shulker,tag=laser,tag=xplus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~1.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_green","laser","xplus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:jungle_fence_gate"}]}]}
execute as @e[tag=type_green,tag=cubelaser,type=shulker,tag=laser,tag=zminus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~-1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~-0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_green","laser","zminus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:jungle_fence_gate"}]}]}
execute as @e[tag=type_green,tag=cubelaser,type=shulker,tag=laser,tag=zplus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~1.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_green","laser","zplus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:jungle_fence_gate"}]}]}
execute as @e[tag=type_green,tag=cubelaser,type=shulker,tag=laser,tag=yminus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~-1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~-0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_green","laser","yminus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:jungle_fence_gate"}]}]}
execute as @e[tag=type_green,tag=cubelaser,type=shulker,tag=laser,tag=yplus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~1 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_green","laser","yplus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:jungle_fence_gate"}]}]}

#summon yellow laser (from caster)
execute as @e[tag=type_yellow,tag=cubelaser,type=armor_stand,tag=laser,tag=xminus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~-1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:armor_stand ~-0.5 ~0.5 ~0.5 {NoGravity:1b,Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["cubelaser","new","startnew","laser","current","type_yellow","xminus"],ArmorItems:[{},{},{},{id:"minecraft:spruce_fence_gate"}]}
execute as @e[tag=type_yellow,tag=cubelaser,type=armor_stand,tag=laser,tag=xplus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:armor_stand ~1.5 ~0.5 ~0.5 {NoGravity:1b,Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["cubelaser","new","startnew","laser","current","type_yellow","xplus"],ArmorItems:[{},{},{},{id:"minecraft:spruce_fence_gate"}]}

execute as @e[tag=type_yellow,tag=cubelaser,type=armor_stand,tag=laser,tag=zminus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~-1 #paint:laserwhitelist align xyz run summon minecraft:armor_stand ~0.5 ~0.5 ~-0.5 {NoGravity:1b,Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["cubelaser","new","startnew","laser","current","type_yellow","zminus"],ArmorItems:[{},{},{},{id:"minecraft:spruce_fence_gate"}]}
execute as @e[tag=type_yellow,tag=cubelaser,type=armor_stand,tag=laser,tag=zplus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~1 #paint:laserwhitelist align xyz run summon minecraft:armor_stand ~0.5 ~0.5 ~1.5 {NoGravity:1b,Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["cubelaser","new","startnew","laser","current","type_yellow","zplus"],ArmorItems:[{},{},{},{id:"minecraft:spruce_fence_gate"}]}

execute as @e[tag=type_yellow,tag=cubelaser,type=armor_stand,tag=laser,tag=yminus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~-1 ~ #paint:laserwhitelist align xyz run summon minecraft:armor_stand ~0.5 ~-0.5 ~0.5 {NoGravity:1b,Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["cubelaser","new","startnew","laser","current","type_yellow","yminus"],ArmorItems:[{},{},{},{id:"minecraft:spruce_fence_gate"}]}
execute as @e[tag=type_yellow,tag=cubelaser,type=armor_stand,tag=laser,tag=yplus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~1 ~ #paint:laserwhitelist align xyz run summon minecraft:armor_stand ~0.5 ~1.5 ~0.5 {NoGravity:1b,Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["cubelaser","new","startnew","laser","current","type_yellow","yplus"],ArmorItems:[{},{},{},{id:"minecraft:spruce_fence_gate"}]}


#summon red laser (from caster)
execute as @e[tag=type_red,tag=cubelaser,type=shulker,tag=laser,tag=xminus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~-1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~-0.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_red","laser","xminus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:acacia_fence_gate"}]}]}
execute as @e[tag=type_red,tag=cubelaser,type=shulker,tag=laser,tag=xplus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~1 ~ ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~1.5 ~0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_red","laser","xplus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:acacia_fence_gate"}]}]}
execute as @e[tag=type_red,tag=cubelaser,type=shulker,tag=laser,tag=zminus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~-1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~-0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_red","laser","zminus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:acacia_fence_gate"}]}]}
execute as @e[tag=type_red,tag=cubelaser,type=shulker,tag=laser,tag=zplus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~ ~1 #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~0 ~1.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_red","laser","zplus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:acacia_fence_gate"}]}]}
execute as @e[tag=type_red,tag=cubelaser,type=shulker,tag=laser,tag=yminus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~-1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~-0 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_red","laser","yminus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:acacia_fence_gate"}]}]}
execute as @e[tag=type_red,tag=cubelaser,type=shulker,tag=laser,tag=yplus,tag=!setup,tag=!new,tag=current] at @s if entity @e[tag=cubelaser,tag=laser,tag=parent,distance=..20] if block ~ ~ ~ #paint:laserwhitelist if block ~ ~1 ~ #paint:laserwhitelist align xyz run summon minecraft:shulker ~0.5 ~1 ~0.5 {Team:"knockback",Silent:1b,Invulnerable:0b,NoAI:1b,Color:0b,Tags:["type_red","laser","yplus","new","current","cubelaser"],Passengers:[{id:"armor_stand",Marker:1b,Invisible:1b,Invulnerable:1b,Rotation:[0f,0.0f],Tags:["laser","current","cubelaser"],ArmorItems:[{},{},{},{id:"minecraft:acacia_fence_gate"}]}]}



#player1
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p1laser,type=shulker,tag=laser,tag=xminus,tag=parent] at @s unless block ~1 ~ ~ #paint:laser positioned ~-32 ~ ~ run tag @e[tag=!new,tag=p1laser,tag=!cubelaser,type=shulker,tag=laser,dx=32,tag=xminus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p1laser,type=shulker,tag=laser,tag=xplus,tag=parent] at @s unless block ~-1 ~ ~ #paint:laser run tag @e[tag=!new,tag=p1laser,tag=!cubelaser,type=shulker,tag=laser,dx=32,tag=xplus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p1laser,type=shulker,tag=laser,tag=yminus,tag=parent] at @s unless block ~ ~1 ~ #paint:laser positioned ~ ~-32 ~ run tag @e[tag=!new,tag=p1laser,tag=!cubelaser,type=shulker,tag=laser,dy=32,tag=yminus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p1laser,type=shulker,tag=laser,tag=yplus,tag=parent] at @s unless block ~ ~-1 ~ #paint:laser run tag @e[tag=!new,tag=p1laser,tag=!cubelaser,type=shulker,tag=laser,dy=32,tag=yplus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p1laser,type=shulker,tag=laser,tag=zminus,tag=parent] at @s unless block ~ ~ ~1 #paint:laser positioned ~ ~ ~-32 run tag @e[tag=!new,tag=p1laser,tag=!cubelaser,type=shulker,tag=laser,dz=32,tag=zminus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p1laser,type=shulker,tag=laser,tag=zplus,tag=parent] at @s unless block ~ ~ ~-1 #paint:laser run tag @e[tag=!new,tag=p1laser,tag=!cubelaser,type=shulker,tag=laser,dz=32,tag=zplus] remove current

#player2
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p2laser,type=shulker,tag=laser,tag=xminus,tag=parent] at @s unless block ~1 ~ ~ #paint:laser positioned ~-32 ~ ~ run tag @e[tag=!new,tag=p2laser,tag=!cubelaser,type=shulker,tag=laser,dx=32,tag=xminus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p2laser,type=shulker,tag=laser,tag=xplus,tag=parent] at @s unless block ~-1 ~ ~ #paint:laser run tag @e[tag=!new,tag=p2laser,tag=!cubelaser,type=shulker,tag=laser,dx=32,tag=xplus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p2laser,type=shulker,tag=laser,tag=yminus,tag=parent] at @s unless block ~ ~1 ~ #paint:laser positioned ~ ~-32 ~ run tag @e[tag=!new,tag=p2laser,tag=!cubelaser,type=shulker,tag=laser,dy=32,tag=yminus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p2laser,type=shulker,tag=laser,tag=yplus,tag=parent] at @s unless block ~ ~-1 ~ #paint:laser run tag @e[tag=!new,tag=p2laser,tag=!cubelaser,type=shulker,tag=laser,dy=32,tag=yplus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p2laser,type=shulker,tag=laser,tag=zminus,tag=parent] at @s unless block ~ ~ ~1 #paint:laser positioned ~ ~ ~-32 run tag @e[tag=!new,tag=p2laser,tag=!cubelaser,type=shulker,tag=laser,dz=32,tag=zminus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p2laser,type=shulker,tag=laser,tag=zplus,tag=parent] at @s unless block ~ ~ ~-1 #paint:laser run tag @e[tag=!new,tag=p2laser,tag=!cubelaser,type=shulker,tag=laser,dz=32,tag=zplus] remove current

#player3
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p3laser,type=shulker,tag=laser,tag=xminus,tag=parent] at @s unless block ~1 ~ ~ #paint:laser positioned ~-32 ~ ~ run tag @e[tag=!new,tag=p3laser,tag=!cubelaser,type=shulker,tag=laser,dx=32,tag=xminus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p3laser,type=shulker,tag=laser,tag=xplus,tag=parent] at @s unless block ~-1 ~ ~ #paint:laser run tag @e[tag=!new,tag=p3laser,tag=!cubelaser,type=shulker,tag=laser,dx=32,tag=xplus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p3laser,type=shulker,tag=laser,tag=yminus,tag=parent] at @s unless block ~ ~1 ~ #paint:laser positioned ~ ~-32 ~ run tag @e[tag=!new,tag=p3laser,tag=!cubelaser,type=shulker,tag=laser,dy=32,tag=yminus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p3laser,type=shulker,tag=laser,tag=yplus,tag=parent] at @s unless block ~ ~-1 ~ #paint:laser run tag @e[tag=!new,tag=p3laser,tag=!cubelaser,type=shulker,tag=laser,dy=32,tag=yplus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p3laser,type=shulker,tag=laser,tag=zminus,tag=parent] at @s unless block ~ ~ ~1 #paint:laser positioned ~ ~ ~-32 run tag @e[tag=!new,tag=p3laser,tag=!cubelaser,type=shulker,tag=laser,dz=32,tag=zminus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p3laser,type=shulker,tag=laser,tag=zplus,tag=parent] at @s unless block ~ ~ ~-1 #paint:laser run tag @e[tag=!new,tag=p3laser,tag=!cubelaser,type=shulker,tag=laser,dz=32,tag=zplus] remove current

#player4
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p4laser,type=shulker,tag=laser,tag=xminus,tag=parent] at @s unless block ~1 ~ ~ #paint:laser positioned ~-32 ~ ~ run tag @e[tag=!new,tag=p4laser,tag=!cubelaser,type=shulker,tag=laser,dx=32,tag=xminus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p4laser,type=shulker,tag=laser,tag=xplus,tag=parent] at @s unless block ~-1 ~ ~ #paint:laser run tag @e[tag=!new,tag=p4laser,tag=!cubelaser,type=shulker,tag=laser,dx=32,tag=xplus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p4laser,type=shulker,tag=laser,tag=yminus,tag=parent] at @s unless block ~ ~1 ~ #paint:laser positioned ~ ~-32 ~ run tag @e[tag=!new,tag=p4laser,tag=!cubelaser,type=shulker,tag=laser,dy=32,tag=yminus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p4laser,type=shulker,tag=laser,tag=yplus,tag=parent] at @s unless block ~ ~-1 ~ #paint:laser run tag @e[tag=!new,tag=p4laser,tag=!cubelaser,type=shulker,tag=laser,dy=32,tag=yplus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p4laser,type=shulker,tag=laser,tag=zminus,tag=parent] at @s unless block ~ ~ ~1 #paint:laser positioned ~ ~ ~-32 run tag @e[tag=!new,tag=p4laser,tag=!cubelaser,type=shulker,tag=laser,dz=32,tag=zminus] remove current
execute as @e[tag=current,tag=setup,tag=!cubelaser,tag=p4laser,type=shulker,tag=laser,tag=zplus,tag=parent] at @s unless block ~ ~ ~-1 #paint:laser run tag @e[tag=!new,tag=p4laser,tag=!cubelaser,type=shulker,tag=laser,dz=32,tag=zplus] remove current


#lasers spawned by blue caster
execute as @e[tag=current,tag=cubelaser,tag=type_blue,type=!player,tag=laser,tag=parent,tag=xplus] at @s unless block ~-1 ~ ~ #minecraft:spruce_logs run tag @e[tag=xplus,tag=type_blue,tag=cubelaser,type=shulker,tag=laser,dx=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_blue,type=!player,tag=laser,tag=parent,tag=xminus] at @s unless block ~1 ~ ~ #minecraft:spruce_logs positioned ~-32 ~ ~ run tag @e[tag=xminus,tag=type_blue,tag=cubelaser,type=!player,tag=laser,dx=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_blue,type=!player,tag=laser,tag=parent,tag=yplus] at @s unless block ~ ~-1 ~ #minecraft:spruce_logs run tag @e[tag=yplus,tag=type_blue,tag=cubelaser,type=shulker,tag=laser,dy=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_blue,type=!player,tag=laser,tag=parent,tag=yminus] at @s unless block ~ ~1 ~ #minecraft:spruce_logs positioned ~ ~-32 ~ run tag @e[tag=yminus,tag=type_blue,tag=cubelaser,type=!player,tag=laser,dy=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_blue,type=!player,tag=laser,tag=parent,tag=zplus] at @s unless block ~ ~ ~-1 #minecraft:spruce_logs run tag @e[tag=zplus,tag=type_blue,tag=cubelaser,type=shulker,tag=laser,dz=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_blue,type=!player,tag=laser,tag=parent,tag=zminus] at @s unless block ~ ~ ~1 #minecraft:spruce_logs positioned ~ ~ ~-32 run tag @e[tag=zminus,tag=type_blue,tag=cubelaser,type=!player,tag=laser,dz=32] remove current

#lasers spawned by green caster
execute as @e[tag=current,tag=cubelaser,tag=type_green,type=!player,tag=laser,tag=parent,tag=xplus] at @s unless block ~-1 ~ ~ #minecraft:birch_logs run tag @e[tag=xplus,tag=type_green,tag=cubelaser,type=shulker,tag=laser,dx=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_green,type=!player,tag=laser,tag=parent,tag=xminus] at @s unless block ~1 ~ ~ #minecraft:birch_logs positioned ~-32 ~ ~ run tag @e[tag=xminus,tag=type_green,tag=cubelaser,type=!player,tag=laser,dx=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_green,type=!player,tag=laser,tag=parent,tag=yplus] at @s unless block ~ ~-1 ~ #minecraft:birch_logs run tag @e[tag=yplus,tag=type_green,tag=cubelaser,type=shulker,tag=laser,dy=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_green,type=!player,tag=laser,tag=parent,tag=yminus] at @s unless block ~ ~1 ~ #minecraft:birch_logs positioned ~ ~-32 ~ run tag @e[tag=yminus,tag=type_green,tag=cubelaser,type=!player,tag=laser,dy=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_green,type=!player,tag=laser,tag=parent,tag=zplus] at @s unless block ~ ~ ~-1 #minecraft:birch_logs run tag @e[tag=zplus,tag=type_green,tag=cubelaser,type=shulker,tag=laser,dz=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_green,type=!player,tag=laser,tag=parent,tag=zminus] at @s unless block ~ ~ ~1 #minecraft:birch_logs positioned ~ ~ ~-32 run tag @e[tag=zminus,tag=type_green,tag=cubelaser,type=!player,tag=laser,dz=32] remove current

#lasers spawned by yellow caster
execute as @e[tag=current,tag=cubelaser,tag=type_yellow,type=armor_stand,tag=laser,tag=parent,tag=xplus] at @s unless block ~-1 ~ ~ #minecraft:jungle_logs align xyz run kill @e[tag=xplus,tag=type_yellow,tag=cubelaser,type=armor_stand,tag=laser,dx=32]
execute as @e[tag=current,tag=cubelaser,tag=type_yellow,type=armor_stand,tag=laser,tag=parent,tag=xminus] at @s unless block ~1 ~ ~ #minecraft:jungle_logs align xyz positioned ~-32 ~ ~ run kill @e[tag=xminus,tag=type_yellow,tag=cubelaser,type=armor_stand,tag=laser,dx=32]
execute as @e[tag=current,tag=cubelaser,tag=type_yellow,type=armor_stand,tag=laser,tag=parent,tag=yplus] at @s unless block ~ ~-1 ~ #minecraft:jungle_logs align xyz run kill @e[tag=yplus,tag=type_yellow,tag=cubelaser,type=armor_stand,tag=laser,dy=32]
execute as @e[tag=current,tag=cubelaser,tag=type_yellow,type=armor_stand,tag=laser,tag=parent,tag=yminus] at @s unless block ~ ~1 ~ #minecraft:jungle_logs align xyz positioned ~ ~-32 ~ run kill @e[tag=yminus,tag=type_yellow,tag=cubelaser,type=armor_stand,tag=laser,dy=32]
execute as @e[tag=current,tag=cubelaser,tag=type_yellow,type=armor_stand,tag=laser,tag=parent,tag=zplus] at @s unless block ~ ~ ~-1 #minecraft:jungle_logs align xyz run kill @e[tag=zplus,tag=type_yellow,tag=cubelaser,type=armor_stand,tag=laser,dz=32]
execute as @e[tag=current,tag=cubelaser,tag=type_yellow,type=armor_stand,tag=laser,tag=parent,tag=zminus] at @s unless block ~ ~ ~1 #minecraft:jungle_logs align xyz positioned ~ ~ ~-32 run kill @e[tag=zminus,tag=type_yellow,tag=cubelaser,type=armor_stand,tag=laser,dz=32]

#lasers spawned by red caster
execute as @e[tag=current,tag=cubelaser,tag=type_red,type=!player,tag=laser,tag=parent,tag=xplus] at @s unless block ~-1 ~ ~ #minecraft:acacia_logs run tag @e[tag=xplus,tag=type_red,tag=cubelaser,type=shulker,tag=laser,dx=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_red,type=!player,tag=laser,tag=parent,tag=xminus] at @s unless block ~1 ~ ~ #minecraft:acacia_logs positioned ~-32 ~ ~ run tag @e[tag=xminus,tag=type_red,tag=cubelaser,type=!player,tag=laser,dx=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_red,type=!player,tag=laser,tag=parent,tag=yplus] at @s unless block ~ ~-1 ~ #minecraft:acacia_logs run tag @e[tag=yplus,tag=type_red,tag=cubelaser,type=shulker,tag=laser,dy=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_red,type=!player,tag=laser,tag=parent,tag=yminus] at @s unless block ~ ~1 ~ #minecraft:acacia_logs positioned ~ ~-32 ~ run tag @e[tag=yminus,tag=type_red,tag=cubelaser,type=!player,tag=laser,dy=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_red,type=!player,tag=laser,tag=parent,tag=zplus] at @s unless block ~ ~ ~-1 #minecraft:acacia_logs run tag @e[tag=zplus,tag=type_red,tag=cubelaser,type=shulker,tag=laser,dz=32] remove current
execute as @e[tag=current,tag=cubelaser,tag=type_red,type=!player,tag=laser,tag=parent,tag=zminus] at @s unless block ~ ~ ~1 #minecraft:acacia_logs positioned ~ ~ ~-32 run tag @e[tag=zminus,tag=type_red,tag=cubelaser,type=!player,tag=laser,dz=32] remove current

execute as @e[type=shulker,tag=laser,tag=!setup] at @s run playsound minecraft:entity.item_frame.rotate_item master @a ~ ~ ~ 1 1
execute as @e[type=shulker,tag=laser,tag=!setup] at @s align xyz if block ~ ~ ~ #paint:laserwhitelist run particle minecraft:dust{color:[1f,0f,.5f],scale:.5} ~0.5 ~0.5 ~0.5 0.3 0.3 0.3 0.1 2 normal


tag @e[type=shulker,tag=laser,tag=!setup,tag=!new] add setup
tag @e[type=shulker,tag=new,tag=laser,tag=!setup] remove new

tag @e[type=armor_stand,tag=type_yellow,tag=laser,tag=!setup,tag=!new] add setup
tag @e[type=armor_stand,tag=type_yellow,tag=new,tag=laser,tag=!setup] remove new

execute as @e[type=shulker,tag=laser,tag=xplus,tag=!current,tag=!cubelaser] at @s positioned ~1 ~ ~ unless entity @e[tag=laser,distance=..0.7,tag=xplus] positioned ~-1 ~0.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=xplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=xminus,tag=!current,tag=!cubelaser] at @s positioned ~-1 ~ ~ unless entity @e[tag=laser,distance=..0.7,tag=xminus] positioned ~1 ~0.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=xminus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=zplus,tag=!current,tag=!cubelaser] at @s positioned ~ ~ ~1 unless entity @e[tag=laser,distance=..0.7,tag=zplus] positioned ~ ~0.5 ~-1 run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=zplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=zminus,tag=!current,tag=!cubelaser] at @s positioned ~ ~ ~-1 unless entity @e[tag=laser,distance=..0.7,tag=zminus] positioned ~ ~0.5 ~1 run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=zminus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=yplus,tag=!current,tag=!cubelaser] at @s positioned ~ ~1 ~ unless entity @e[tag=laser,distance=..0.7,tag=yplus] positioned ~ ~-1.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=yplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=yminus,tag=!current,tag=!cubelaser] at @s positioned ~ ~-1 ~ unless entity @e[tag=laser,distance=..0.7,tag=yminus] positioned ~ ~1.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=yminus,tag=!current] add laserkill

#lasers from extenders
execute as @e[type=shulker,tag=laser,tag=xplus,tag=!current,tag=cubelaser,tag=type_blue] at @s positioned ~1 ~ ~ unless entity @e[tag=type_blue,tag=laser,distance=..0.7,tag=xplus] positioned ~-1 ~0.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=xplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=xminus,tag=!current,tag=cubelaser,tag=type_blue] at @s positioned ~-1 ~ ~ unless entity @e[tag=type_blue,tag=laser,distance=..0.7,tag=xminus] positioned ~1 ~0.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=xminus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=zplus,tag=!current,tag=cubelaser,tag=type_blue] at @s positioned ~ ~ ~1 unless entity @e[tag=type_blue,tag=laser,distance=..0.7,tag=zplus] positioned ~ ~0.5 ~-1 run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=zplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=zminus,tag=!current,tag=cubelaser,tag=type_blue] at @s positioned ~ ~ ~-1 unless entity @e[tag=type_blue,tag=laser,distance=..0.7,tag=zminus] positioned ~ ~0.5 ~1 run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=zminus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=yplus,tag=!current,tag=cubelaser,tag=type_blue] at @s positioned ~ ~1 ~ unless entity @e[tag=type_blue,tag=laser,distance=..0.7,tag=yplus] positioned ~ ~-1.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=yplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=yminus,tag=!current,tag=cubelaser,tag=type_blue] at @s positioned ~ ~-1 ~ unless entity @e[tag=type_blue,tag=laser,distance=..0.7,tag=yminus] positioned ~ ~1.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=yminus,tag=!current] add laserkill

execute as @e[type=shulker,tag=laser,tag=xplus,tag=!current,tag=cubelaser,tag=type_green] at @s positioned ~1 ~ ~ unless entity @e[tag=type_green,tag=laser,distance=..0.7,tag=xplus] positioned ~-1 ~0.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=xplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=xminus,tag=!current,tag=cubelaser,tag=type_green] at @s positioned ~-1 ~ ~ unless entity @e[tag=type_green,tag=laser,distance=..0.7,tag=xminus] positioned ~1 ~0.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=xminus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=zplus,tag=!current,tag=cubelaser,tag=type_green] at @s positioned ~ ~ ~1 unless entity @e[tag=type_green,tag=laser,distance=..0.7,tag=zplus] positioned ~ ~0.5 ~-1 run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=zplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=zminus,tag=!current,tag=cubelaser,tag=type_green] at @s positioned ~ ~ ~-1 unless entity @e[tag=type_green,tag=laser,distance=..0.7,tag=zminus] positioned ~ ~0.5 ~1 run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=zminus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=yplus,tag=!current,tag=cubelaser,tag=type_green] at @s positioned ~ ~1 ~ unless entity @e[tag=type_green,tag=laser,distance=..0.7,tag=yplus] positioned ~ ~-1.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=yplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=yminus,tag=!current,tag=cubelaser,tag=type_green] at @s positioned ~ ~-1 ~ unless entity @e[tag=type_green,tag=laser,distance=..0.7,tag=yminus] positioned ~ ~1.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=yminus,tag=!current] add laserkill

execute as @e[type=shulker,tag=laser,tag=xplus,tag=!current,tag=cubelaser,tag=type_yellow] at @s positioned ~1 ~ ~ unless entity @e[tag=type_yellow,tag=laser,distance=..0.7,tag=xplus] positioned ~-1 ~0.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=xplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=xminus,tag=!current,tag=cubelaser,tag=type_yellow] at @s positioned ~-1 ~ ~ unless entity @e[tag=type_yellow,tag=laser,distance=..0.7,tag=xminus] positioned ~1 ~0.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=xminus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=zplus,tag=!current,tag=cubelaser,tag=type_yellow] at @s positioned ~ ~ ~1 unless entity @e[tag=type_yellow,tag=laser,distance=..0.7,tag=zplus] positioned ~ ~0.5 ~-1 run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=zplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=zminus,tag=!current,tag=cubelaser,tag=type_yellow] at @s positioned ~ ~ ~-1 unless entity @e[tag=type_yellow,tag=laser,distance=..0.7,tag=zminus] positioned ~ ~0.5 ~1 run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=zminus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=yplus,tag=!current,tag=cubelaser,tag=type_yellow] at @s positioned ~ ~1 ~ unless entity @e[tag=type_yellow,tag=laser,distance=..0.7,tag=yplus] positioned ~ ~-1.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=yplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=yminus,tag=!current,tag=cubelaser,tag=type_yellow] at @s positioned ~ ~-1 ~ unless entity @e[tag=type_yellow,tag=laser,distance=..0.7,tag=yminus] positioned ~ ~1.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=yminus,tag=!current] add laserkill

execute as @e[type=shulker,tag=laser,tag=xplus,tag=!current,tag=cubelaser,tag=type_red] at @s positioned ~1 ~ ~ unless entity @e[tag=type_red,tag=laser,distance=..0.7,tag=xplus] positioned ~-1 ~0.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=xplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=xminus,tag=!current,tag=cubelaser,tag=type_red] at @s positioned ~-1 ~ ~ unless entity @e[tag=type_red,tag=laser,distance=..0.7,tag=xminus] positioned ~1 ~0.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=xminus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=zplus,tag=!current,tag=cubelaser,tag=type_red] at @s positioned ~ ~ ~1 unless entity @e[tag=type_red,tag=laser,distance=..0.7,tag=zplus] positioned ~ ~0.5 ~-1 run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=zplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=zminus,tag=!current,tag=cubelaser,tag=type_red] at @s positioned ~ ~ ~-1 unless entity @e[tag=type_red,tag=laser,distance=..0.7,tag=zminus] positioned ~ ~0.5 ~1 run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=zminus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=yplus,tag=!current,tag=cubelaser,tag=type_red] at @s positioned ~ ~1 ~ unless entity @e[tag=type_red,tag=laser,distance=..0.7,tag=yplus] positioned ~ ~-1.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=yplus,tag=!current] add laserkill
execute as @e[type=shulker,tag=laser,tag=yminus,tag=!current,tag=cubelaser,tag=type_red] at @s positioned ~ ~-1 ~ unless entity @e[tag=type_red,tag=laser,distance=..0.7,tag=yminus] positioned ~ ~1.5 ~ run tag @e[distance=..0.7,tag=laser,sort=nearest,tag=yminus,tag=!current] add laserkill




execute as @e[tag=laser,type=armor_stand,tag=!type_yellow] at @s unless entity @e[type=shulker,tag=laser,distance=..1.2] run kill @s

execute as @e[tag=laserkill] at @s run playsound minecraft:entity.item_frame.rotate_item master @a ~ ~ ~ 1 1
execute as @e[tag=laserkill] at @s run tp @s ~ ~-30 ~
execute as @e[tag=laserkill] at @s run kill @e[tag=laser,distance=..2]
kill @e[tag=laserkill]
